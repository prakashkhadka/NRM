<navigation></navigation>

<section id="createRoom">
    
    <h3 >Rent your room</h3>
    <p class="text-xs-center">Please fill the following details to post your room ad</p>


    <div class="page-wrapper">
        <div class="page-container">
        
        <form name='nrForm' class="form-horizontal" enctype="multipart/form-data" novalidate>
            
             <!-- Unit Number-->
            <div class="form-group" ng-class="{'has-danger':nrForm.unit.$invalid && nrForm.streetNo.$dirty,'has-success':nrForm.unit.$valid && nrForm.unit.$dirty}">
                <label for="unit" class="label-control">Unit</label>
                <div class="input-wrapper-small">
                    <input name='unit'  
                          class="form-control" 
                          id="unit" 
                          ng-class="{'form-control-danger':nrForm.unit.$invalid && nrForm.unit.$dirty,'form-control-success':nrForm.unit.$valid}" 
                          ng-minlength='1'
                          ng-maxlength='2' 
                          ng-model="room.unit"  
                          placeholder="Unit" 
                          type="number" 
                          required >
                    
                    <!-- error-block -->
                    <div class="error-block" ng-show="nrForm.unit.$invalid && nrForm.unit.$dirty">
                        <p ng-show="nrForm.unit.$error.maxlength"> Unit number must be below 99</p>
                    </div>
                    <!-- End of error-block -->
                </div>
                <!-- End of input-wrapper -->
            </div>
            <!-- End of form-group -->

           
           <!-- Street Number -->
            <div class="form-group" ng-class="{'has-danger':nrForm.streetNo.$invalid && nrForm.streetNo.$dirty,'has-success':nrForm.streetNo.$valid && nrForm.streetNo.$dirty}">
                <label for="streetNo" class="label-control">Street No</label>
                <div class="input-wrapper-small">
                    <input name='streetNo' 
                    type="number" 
                    class="form-control" 
                    id="streetNo" 
                    placeholder="Street No"
                    ng-minlength='1' 
                    ng-maxlength='3' 
                    ng-model="room.street_no"
                    ng-class="{'form-control-danger':nrForm.streetNo.$invalid && nrForm.streetNo.$dirty,'form-control-success':nrForm.streetNo.$valid}"
                    required>

                <!-- error-block -->
                <div class="error-block" ng-show="nrForm.streetNo.$invalid && nrForm.streetNo.$dirty">
                    <p ng-show="nrForm.streetNo.$error.required">Street number is required.</p>
                    <p ng-show="nrForm.streetNo.$error.maxlength">Street number must be below 999.</p>
                </div>
                <!-- End of error-block -->
                </div>
                <!-- End of input-wrapper -->
            </div>
            <!-- End of form-group -->
            

            <!-- Street Name -->
            <div class="form-group" ng-class="{'has-danger':nrForm.streetName.$invalid && nrForm.streetName.$dirty,'has-success':nrForm.streetName.$valid}">
              <label for="streetName" class="label-control">Street Name</label>
              <div class="input-wrapper-medium">
                <input type="text" 
                class="form-control" 
                name="streetName" 
                id="streetName" 
                placeholder="Street Name" 
                ng-model="room.street_name" 
                required 
                ng-class="{'form-control-danger':nrForm.streetName.$invalid && nrForm.streetName.$dirty,'form-control-success':nrForm.streetName.$valid}">
                
                <!-- error-block -->
                <div class="error-block" ng-show="nrForm.streetName.$invalid && nrForm.streetName.$dirty">
                    <p ng-show="nrForm.streetName.$error.required">Street name is required.</p>
                </div>
                <!-- End of error-block -->
              </div>
              <!-- End of input-wrapper -->
            </div>
            <!-- End of form-group -->
            

            <!-- Suburb -->
            <div class="form-group" ng-class="{'has-danger':nrForm.suburb.$invalid && nrForm.suburb.$dirty,'has-success':nrForm.suburb.$valid && nrForm.suburb.$dirty}">
              <label for="suburb" class="label-control">Suburb<span id="required">*</span></label>
              <div class="input-wrapper-medium">
                <input type="text" 
                class="form-control" 
                id="suurb" 
                placeholder="Suburb" 
                ng-model="room.suburb" 
                ng-change="getValue()" 
                name="suburb" 
                required 
                ng-class="{'form-control-danger':nrForm.suburb.$invalid && nrForm.suburb.$dirty,'form-control-success':nrForm.suburb.$valid}">
                <ul class="suggestions-list">
                    <li ng-repeat="su in returnedSub | filter: room.suburb:strict | limitTo:7" ng-class="{active : selectedIndex === $index}" 
                        ng-click="AssignValueAndHide(su)">{{su[0]}},   {{su[1]}}  {{su[2]}}</li>
                </ul>
              </div>
            </div>
            

            <!-- Post Code -->
            <div class="form-group" 
            ng-class="{'has-danger':nrForm.postCode.$invalid && nrForm.postCode.$dirty,'has-success':nrForm.postCode.$valid && nrForm.postCode.$dirty }">
              <label for="postcode" class="label-control">Post Code<span id="required">*</span></label>
              <div class="input-wrapper-small">
                <input type="number" 
                class="form-control" 
                id="postCode" 
                placeholder="Postcode" 
                ng-model="room.postcode" 
                name="postCode" 
                ng-minlength='4'
                ng-maxlength='4'
                required 
                ng-class="{'form-control-danger':nrForm.postCode.$invalid && nrForm.postCode.$dirty,'form-control-success':nrForm.postCode.$valid}">
               
                <!-- error-block -->
                <div class="error-block" ng-show="nrForm.postCode.$invalid && nrForm.postCode.$dirty">
                <p>Hel</p>
                    <p ng-show="nrForm.PostCode.$error">Post code is required.</p>
                     <p ng-show="nrForm.PostCode.$error.minlength || nrForm.PostCode.$error.maxlength">Post code must be 4 digits.</p>
                </div>
                <!-- End of error-block -->
              </div>
              <!-- End of input-wrapper -->
            </div>
            <!-- End of form-group -->
            

            <!-- State -->
            <div class="form-group" ng-class="{'has-danger':nrForm.state.$invalid && nrForm.state.$dirty,'has-success':nrForm.state.$valid && nrForm.postCode.$dirty}">
              <label for="state" class="label-control">State<span id="required">*</span></label>
              <div class="input-wrapper-medium">
                <input type="text" 
                class="form-control" 
                id="state" 
                placeholder="State" 
                ng-model="room.state" 
                required 
                name="state" 
                ng-class="{'form-control-danger':nrForm.state.$invalid && nrForm.state.$dirty,'form-control-success':nrForm.state.$valid}">
              </div>
            </div>
            

            <!-- Rent -->
            <div class="form-group" ng-class="{'has-danger':nrForm.rent.$invalid && nrForm.rent.$dirty,'has-success':nrForm.rent.$valid&& nrForm.rent.$dirty}">
                <label for="rent" class="label-control">Weekly Rent $<span id="required">*</span></label>
                    <div class="input-wrapper-small">
                        <input name='rent' 
                        type="number" 
                        class="form-control" 
                        name="rent" 
                        id="rents" 
                        placeholder="Weekly Rent" 
                        ng-model="room.rent" 
                        ng-maxlength='4' 
                        required
                        ng-class="{'form-control-danger':nrForm.rent.$invalid && nrForm.rent.$dirty,'form-control-success':nrForm.rent.$valid}">

                        <!-- error-block -->
                        <div class="error-block" ng-show="nrForm.rent.$invalid && nrForm.rent.$dirty" >
                            <p ng-show="nrForm.rent.$error.maxlength">It looks unusual weekly rent</p>
                            <p ng-show="nrForm.rent.$error.required">Please enter weekly rent amount.</p>
                        </div>
                    <!-- End of error-block -->
                    </div>
                    <!-- End of input-wrapper -->
            </div>
            <!-- End of form-group -->
            

            <!-- Bond -->
            <div class="form-group" ng-class="{'has-danger':nrForm.bond.$invalid && nrForm.bond.$dirty,'has-success':nrForm.bond.$valid && nrForm.bond.$dirty}">
              <label for="bond" class="label-control">Bond</label>
                <div class="input-wrapper-small">
                    <input type="number" 
                    class="form-control" 
                    id="bond" 
                    name="bond"
                    placeholder="Bond" 
                    ng-model="room.bond"
                    ng-minlength="3"
                    ng-maxlength="4"
                    ng-class="{'form-control-danger':nrForm.bond.$invalid && nrForm.bond.$dirty,'form-control-success':nrForm.bond.$valid && nrForm.bond.$dirty}"
                    >

                    <!-- error-block -->
                    <div class="error-block" ng-show="nrForm.bond.$invalid && nrForm.bond.$dirty" >
                        <p ng-show="nrForm.bond.$invalid">Please enter valid amount.</p>
                    </div>
                    <!-- End of error-block -->
                </div>
                <!-- End of input-wrapper -->
            </div>
            <!-- End of form-group -->
            
            
            <!-- Gneder -->
            <div class="form-group">
                <label for="gender" class="label-control">Preferred Gender</label>
                <div class="input-wrapper">
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" value="couple" ng-model="room.gender">Couple
                        </label>
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" value="female" ng-model="room.gender">Female
                        </label>
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" value="male" ng-model="room.gender">Male
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" value="no preferred gender" ng-model="room.gender" checked>Any
                        </label>
                    </div>
                </div>
            </div>
            <!-- End of form-group -->
            

            <!-- Available Date -->
            <div class="form-group" ng-class="{'has-danger':nrForm.availableFrom.$invalid && nrForm.availableFrom.$dirty,'has-success':nrForm.availableFrom.$valid && nrForm.availableFrom.$dirty}">
                <label for="available" class="label-control">Available From<span id="required">*</span></label>
                <div class="input-wrapper-medium">
                    <input name='availableFrom' 
                    type="date" 
                    class="form-control" 
                    id="available" 
                    placeholder="Available From" 
                    ng-model="room.available_from" 
                    required
                    ng-class="{'form-control-danger':nrForm.availableFrom.$invalid && nrForm.availableFrom.$dirty,'form-control-success':nrForm.availableFrom.$valid}">
                <div class="error-block" ng-show="nrForm.availableFrom.$invalid && nrForm.availableFrom.$dirty">
                    <p ng-show="nrForm.availableFrom.$error.required">
                        Please enter available date
                    </p>
                </div>
                </div>
            </div>
        
            
            <!-- Contact No -->
            <div class="form-group" ng-class="{'has-danger':nrForm.contactNo.$invalid && nrForm.contactNo.$dirty,'has-success':nrForm.contactNo.$valid && nrForm.contactNo.$dirty}">
                <label for="contact" class="label-control">Contact No<span id="required">*</span></label>
                <div class="input-wrapper-medium">
                    <input name='contactNo' 
                    type="number"
                    class="form-control" 
                    id="contact" 
                    placeholder="Contact No" 
                    ng-model="room.contact_no" 
                    ng-minlength='10' 
                    ng-maxlength='10' 
                    required 
                    ng-class="{'form-control-danger':nrForm.contactNo.$invalid && nrForm.contactNo.$dirty,'form-control-success':nrForm.contactNo.$valid}">
                <div class="error-block" ng-show="nrForm.contactNo.$invalid && nrForm.contactNo.$dirty">
                 <p ng-show="nrForm.contactNo.$error.required">
                        Please enter Contact No (Telephone or Mobile no)
                   </p>
                  <p ng-show="nrForm.contactNo.$error.minlength">
                        Contact number must be at least 10 digit long.
                   </p>
                  <p ng-show="nrForm.contactNo.$error.maxlength">
                        Contact number must not be more than 10 digit long.
                   </p>
                </div>
                </div>
            </div>


            <!-- Message -->
            <div class="form-group">
                <label for="message" class="label-control">Message</label>
                <div class="input-wrapper">
                    <textarea name='message'
                              rows="5"
                              type="text" 
                              class="form-control" 
                              id="message" 
                              placeholder="Your Message" 
                              ng-model="room.message" 
                              ng-maxlength='300'>
                    </textarea>
                <div class="error" ng-show="nrForm.message.$invalid && nrForm.message.$dirty">
                    <span ng-show="nrForm.message.$error.maxlength">
                        Your message is more than 300 character long. Please make it short.
                    </span>
                </div>
                </div>
            </div>
            
            <!--for Images -->
            <div>
                <!-- Image info -->
                <div class="input-wrapper-right image-upload-info" ng-show="files.length >0" >
                    <ul class="uploaded-images" ng-repeat="file in files track by $index">
                        <li>
                            
                            <img class="uploaded-image-thumbnail" ngf-thumbnail="file"/>
                            <button class="remove-image" ng-click="deleteFile($index)">&times;</button>
                            
                            <p>
                                {{file.name}} {{file.$errorParam}}
                                <!--Size: {{file.size / 1000 | number:2}} KB-->
                            </p>  
                        </li>
                    </ul>

                    <p ng-if="files.length >=1"> You have selected {{files.length}} Image<span ng-if="files.length >1">s</span>.</p>
                </div>
                <!-- End of image-upload-info -->
            </div>



                <div ng-hide="files.length>=4" class="form-group">
                    <label for="imagesInput" class="label-control">Room image: </label>
                <div class="input-wrapper">
                    <button class="btn-upload-image"
                        name="file"
                        ngf-select=""
                        ng-change="getAmazonUrl()"
                        ng-model="files"
                        ngf-max-files="4"
                        ngf-max-size="'12MB'"
                        ngf-pattern="'.jpg,.jpeg'"
                        ngf-keep="true | 'distinct'"
                        ngf-fix-orientation="true"
                        ngf-capture="'camera'"
                        ngf-resize="{width: 500, height: 500, quality: 0.8}"
                        ngf-resize-if="$width > 800 || $height > 800"
                        ngf-before-model-change="beforeChange($files)"
                        ngf-change ="afterChange($files)"
                        ngf-multiple="true"
                        ng-disabled="compressing">

                        <span ng-hide="compressing" class="fa fa-cloud-upload"></span>
                        <span ng-show="compressing" class="fa fa-spinner" > </span>
                        <span ng-hide="compressing">Upload image</span>
                        <span ng-show="compressing">Uploading</span>
                    </button>
                </div> 
                </div>
                
            
            
            <div ng-show="nrForm.file.$invalid">
                <p>Something went wrong: please choose images again.</p>
                <span ng-show="nrForm.file.$error.maxSize">
                    Image size too large. Maximum size : 12MB
                </span>
                <span ng-show="nrForm.file.$error.maxFiles">
                    Maximum images allowed to upload : 4
                </span>
                <span ng-show="nrForm.file.$error.pattern">
                    only .jpg or .jpeg images are allowed;
                </span>
            </div>
            
            <div class="form-group">
              <div class="input-wrapper-right">
                  <button ng-disabled='nrForm.$invalid' type="submit" ng-click="register(room); uploadImage()" class="btn-general">Submit</button>
                  <button ng-click="goHome()" class="btn-cancel">Cancel</button>
              </div>
            </div>
            
        </form>

        <!-- Feedback Modal -->
            <feedback is-action-completed="{{isPosted}}" feedback-message="{{feedbackMessage}}"></feedback>
        </div>
    </div>
</section>