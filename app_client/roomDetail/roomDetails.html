<navigation></navigation>
<!-- Room details section -->
<section>  
    <h3>details</h3>
    <!-- carousel-wrapper -->
    <div class="carousel-wrapper" ng-if="ORD.images.length > 0">
        <div id="room-carousel" class="carousel" data-ride="carousel">
            <!-- carousel-item -->
            <div class="carousel-item" ng-class="{active:!$index}" ng-repeat="img in ORD.images">
                <img src="https://s3-ap-southeast-2.amazonaws.com/nrm/{{img}}" class="img-fluid">
            </div>
            <!-- End of carousel-item -->
        </div>
        
        <!-- carousel-indicator-wrapper -->
        <div class="carousel-indicator-wrapper">
            <!-- carousel-thumbnail -->
            <ul class="carousel-indicator">
                <li data-target="#room-carousel" data-slide-to="{{$index}}" ng-repeat="img in ORD.images">
                    <img class="carousel-thumbnail" src="https://s3-ap-southeast-2.amazonaws.com/nrm/{{img}}" >
                </li>
            </ul>
                
            <!-- carousel-control-top -->
            <a class="carousel-control-top" data-target="#room-carousel" role="button" data-slide="prev">
                <span class="fa fa-chevron-circle-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <!-- End of carousel-control-top -->
                
            <!-- End of carousel-control-top -->
            <a class="carousel-control-bottom" data-target="#room-carousel" role="button" data-slide="next">
                <span class="fa fa-chevron-circle-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
            <!-- End of carousel-control-bottom -->
        </div>
        <!-- End of carousel-indicator-wrapper -->
    </div>
    <!-- End of carousel-wrapper -->

    <!-- Room-details section -->
    <div class="room-details-wrapper">
        <div class="room-details">
            <h5 class="room-details-address">${{ORD.rent}} weekly</h5>
            <br>
            <p>{{ORD.unit}} / {{ORD.street_no}}, {{ORD.street_name}}</p>
            <p><strong>{{ORD.suburb}}, {{ORD.state}} {{ORD.postcode}}</strong></p>
            <p><strong>Posted on : </strong>{{ORD.createdOn | date : "d MMMM y"}}</p>
            <div class="roomDetailsTwoDivs">
                <div class="roomDetailsLeft">
                    <p ng-if="ORD.bond"><strong>Bond :</strong> ${{ORD.bond}}</p>
                    <p ng-if="ORD.gender"><strong>Preferred :</strong> {{ORD.gender}}</p>
                    <p><strong>Available from :</strong> {{ORD.available_from | date :  "dd MMMM yyyy"}} </p>
                    <p><strong>Contact :</strong> {{ORD.contact_no}}</p>
                    <p><strong>Parking:</strong> {{ORD.parking}}</p>
                </div>
                <div class="roomDetailsRight">
                    <p><strong>Property Type:</strong> {{ORD.propertyType}}</p>
                    <p><strong>Total Bedrooms:</strong> {{ORD.totalBedRooms}}</p>
                    <p><strong>Total Bathrooms:</strong> {{ORD.totalBathrooms}}</p>
                    <p><strong>Bills:</strong> {{ORD.bills}}</p>
                    <p><strong>Furnishing:</strong> {{ORD.furnishing}}</p>
                </div>
            </div>
            <div class="roomDetailsMessage">
                <p>{{ORD.message}}</p>
            </div>

            <div class="email-option">
                <button class="btn-send-message btn-email-owner" data-toggle="collapse" data-target="#email-owner" aria-expanded="false" aria-controls="email-owner">
                    Email Room Owner
                </button>
                <button class="btn-close" data-toggle="collapse" data-target="#email-owner">&times</button>
            </div>
            <!-- collapsible div -->
            <div id="email-owner" class="collapse">
                <div class="email-form-wrapper">
                    <form name="emailOwnerForm" role="form" id="email-owner-form">
                        <!-- Name -->
                        <div class="form-group" ng-class="{'has-danger':emailOwnerForm.visitorName.$invalid && emailOwnerForm.visitorName.$dirty,
                                                'has-success':emailOwnerForm.visitorName.$valid && emailOwnerForm.visitorName.$dirty}">
                            <label class="label-control">Name</label>
                            <div class="input-wrapper">
                                <input name="visitorName" 
                                       type="text" 
                                       class="form-control"
                                       ng-minlength ="2"
                                       ng-maxlength ="40"
                                       ng-model="emailOwner.name"
                                       required
                                       ng-class="{'form-control-danger':emailOwnerForm.visitorName.$invalid && emailOwnerForm.visitorName.$dirty,
                                                    'form-control-success':emailOwnerForm.visitorName.$valid}">
                                <!-- error-block -->
                                <div class="error-block" ng-show="emailOwnerForm.visitorName.$invalid && emailOwnerForm.visitorName.$dirty">
                                    <p ng-show="emailOwnerForm.visitorName.$error.required">Your name is required.</p>
                                    <p ng-show="emailOwnerForm.visitorName.$error.minlength">Your name must be at least 2 characters long.</p>
                                    <p ng-show="emailOwnerForm.visitorName.$error.maxlength">Your name must be below 40 characters long.</p>
                                </div>
                                <!-- End of error-block -->
                            </div>
                            <!-- End of input-wrapper  -->
                        </div>
                        <!-- End of form-group -->

                        <!-- Phone -->
                        <div class="form-group" ng-class="{'has-danger':emailOwnerForm.visitiorPhone.$invalid && emailOwnerForm.visitiorPhone.$dirty,
                                                'has-success':emailOwnerForm.visitiorPhone.$valid && emailOwnerForm.visitiorPhone.$dirty}">
                            <label class="label-control">Phone</label>
                            <div class="input-wrapper">
                                <input type="number" 
                                       name="visitiorPhone" 
                                       class="form-control"
                                       ng-minlength='10' 
                                       ng-maxlength='10'
                                       ng-model="emailOwner.phone"
                                       required
                                       ng-class="{'form-control-danger':emailOwnerForm.visitiorPhone.$invalid && emailOwnerForm.visitiorPhone.$dirty,
                                                    'form-control-success':emailOwnerForm.visitiorPhone.$valid}">
                                <div class="error-block" ng-show="emailOwnerForm.visitiorPhone.$invalid && emailOwnerForm.visitiorPhone.$dirty">
                                    <p ng-show="emailOwnerForm.visitiorPhone.$error.required">
                                        Please enter telephone or mobile number.
                                      </p>
                                    <p ng-show="emailOwnerForm.visitiorPhone.$error.minlength">
                                        Contact number must be at least 10 digit long.
                                     </p>
                                    <p ng-show="emailOwnerForm.visitiorPhone.$error.maxlength">
                                        Contact number must not be more than 10 digit long.
                                    </p>
                                </div>
                                <!-- End of error-block -->
                            </div>
                            <!-- End of input-wrapper  -->
                        </div>
                        <!-- End of form-group -->


                        <!-- Email -->
                        <div class="form-group" ng-class="{'has-danger':emailOwnerForm.visitiorEmail.$invalid && emailOwnerForm.visitiorEmail.$dirty,
                                                'has-success':emailOwnerForm.visitiorEmail.$valid && emailOwnerForm.visitiorEmail.$dirty}">
                            <label class="label-control">Email</label>
                            <div class="input-wrapper">
                                <input type="email" 
                                       name="visitiorEmail" 
                                       class="form-control"
                                       ng-model="emailOwner.email"
                                       required
                                       ng-class="{'form-control-danger':emailOwnerForm.visitiorEmail.$invalid && emailOwnerForm.visitiorEmail.$dirty,
                                                    'form-control-success':emailOwnerForm.visitiorEmail.$valid}">
                                <div class="error-block" ng-show="emailOwnerForm.visitiorEmail.$invalid && emailOwnerForm.visitiorEmail.$dirty">
                                    <p ng-show="emailOwnerForm.visitiorEmail.$error.required" ng-hide="emailOwnerForm.visitiorEmail.$invalid">
                                        Please enter your email address.
                                    </p>
                                    <p ng-show="emailOwnerForm.visitiorEmail.$invalid" ng-hide="emailOwnerForm.visitiorEmail.$error.required">
                                        Please enter valid email.
                                    </p>
                                </div>
                                <!-- End of error-block -->
                            </div>
                            <!-- End of input-wrapper  -->
                        </div>
                        <!-- End of form-group -->


                        <!-- Message -->
                        <div class="form-group" ng-class="{'has-danger':emailOwnerForm.visitorMessage.$invalid && emailOwnerForm.visitorMessage.$dirty,
                                                'has-success':emailOwnerForm.visitorMessage.$valid && emailOwnerForm.visitorMessage.$dirty}">
                            <label class="label-control">Message</label>
                            <div class="input-wrapper">
                                   <textarea name="visitorMessage" 
                                             class="form-control"
                                             ng-model="emailOwner.message"
                                             required
                                             ng-class="{'form-control-danger':emailOwnerForm.visitorMessage.$invalid && emailOwnerForm.visitorMessage.$dirty,
                                                    'form-control-success':emailOwnerForm.visitorMessage.$valid}">
                                   </textarea>
                                   <div class="error-block" ng-show="emailOwnerForm.visitorMessage.$invalid && emailOwnerForm.visitorMessage.$dirty">
                                        <p ng-show="emailOwnerForm.visitorMessage.$error.required">
                                            Please enter your message.
                                        </p>
                                    </div>
                                   <!-- End of error-block -->
                            </div>
                            <!-- End of input-wrapper  -->
                        </div>
                       <!--  End of form-group   -->

                        <!-- Send button -->
                        <div class="form-group">
                            <div class="input-wrapper-right">
                                <button class="btn-send-email"
                                        ng-disabled="emailOwnerForm.$invalid"
                                        ng-click="sendEmailToOwner(emailOwner)">
                                    Send Email
                                </button>
                            </div>
                            <!-- End of input-wrapper-right -->
                        </div>
                        <!-- End of form-group -->
                    </form>
                    <feedback is-action-completed="{{isSent}}" feedback-message="{{feedbackMessage}}"></feedback>
                </div>
                <!-- End of email-form-wrapper -->
            </div>
            <!-- End of collapsible div -->
        </div>
        <!-- End of room-details -->
    </div>
    <!-- End of room-details-wrapper -->
</section>
<!-- End of Room details section -->   
